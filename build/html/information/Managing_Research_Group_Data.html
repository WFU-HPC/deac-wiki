
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Background &#8212; DEAC Cluster Wiki  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="background">
<h1>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h1>
<p>By and large, the most difficult issue to effectively manage with a
large research group (that is, greater than 1 person!) is the data
created on the cluster by everyone in that research group. Subtle issues
related to disk storage and data ownership can make results someone you
supervise has generated be completely inaccessible to you! Some
effective research group policies regarding how your users function can
help reduce the stress and frustration of having all the results but not
being able to view them. This article covers some background information
and strategies to help you develop those policies in your group.</p>
<div class="section" id="account-convention">
<h2>Account Convention<a class="headerlink" href="#account-convention" title="Permalink to this headline">¶</a></h2>
<p>Accounts on the cluster are created such that each user has their own
primary group. This is the default convention followed by Red Hat and
adopted by the WFU DEAC cluster. This convention means that, when a user
creates a file or directory, it will be typically be owned and grouped
using that user’s primary memberships.</p>
<p>:* The caveat to this convention involves files created in a job
submitted to the cluster. Cluster jobs run as the user submitted (as you
would expect) and as the fairshare group under which the job was
submitted (not expected). So, for user BOB submitting a job under the
generalGrp fairshare group, all files created by the job will be
‘BOB.generalGrp’.</p>
</div>
<div class="section" id="group-convention">
<h2>Group Convention<a class="headerlink" href="#group-convention" title="Permalink to this headline">¶</a></h2>
<p>All users are assigned to multiple groups. These groups include the
“fairshare” group (under which your priorities are determined by the
cluster scheduler), your primary research group (which could also be the
fairshare group), your primary department, a general research
collaboration group, etc. Any user can change the group membership of a
file or directory that of which they are a member (and have permission)
to any other group to which they belong.</p>
</div>
<div class="section" id="group-sticky-bit">
<h2>Group Sticky Bit<a class="headerlink" href="#group-sticky-bit" title="Permalink to this headline">¶</a></h2>
<p>UNIX/Linux has this concept of a “group sticky bit” that can be set on a
directory. By setting the bit, you are making the group membership of
that directory “sticky”, that is you declare that all new files and
directories created in that directory will have the same group
membership of the parent. A common misunderstanding of the sticky bit is
that it changes existing files and directories, which is does not! Only
newly created
files/directories.</p>
<p><code class="docutils literal notranslate">&#160; <span class="pre">This</span> <span class="pre">sticky</span> <span class="pre">bit</span> <span class="pre">overrides</span> <span class="pre">any</span> <span class="pre">default</span> <span class="pre">behavior</span> <span class="pre">that</span> <span class="pre">is</span> <span class="pre">in</span> <span class="pre">effect</span> <span class="pre">for</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span> <span class="pre">creation,</span> <span class="pre">even</span> <span class="pre">the</span> <span class="pre">SLURM</span> <span class="pre">job</span> <span class="pre">group</span> <span class="pre">membership</span> <span class="pre">behavior!</span></code></p>
</div>
</div>
<div class="section" id="maintaining-group-ownership">
<h1>Maintaining Group Ownership<a class="headerlink" href="#maintaining-group-ownership" title="Permalink to this headline">¶</a></h1>
<p>The general idea is simple. Create a primary level directory with the
correct group membership and sticky bit set so that all directories and
files underneath now belong to the group. Below the desired directory,
run the following commands:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">chgrp</span> <span class="pre">researchGrp</span> <span class="pre">/deac/researchGrp</span></code>
<code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">chmod</span> <span class="pre">2770</span> <span class="pre">/deac/researchGrp</span></code></p>
<p>The remaining steps involved require a group policy set up by the
research group. This policy must include two key features:</p>
<ol class="simple">
<li><p>All users must create their data files in that directory tree. You
may want to have someone do a quarterly audit of the directory to
ensure all the contents still have the correct group memberships.</p></li>
<li><p>All users must have a specific ‘umask’ in the login configuration
files (.bashrc or .tcshrc) such that the group permissions have at
least read access and maybe even write access (‘umask 027’ or ‘umask
007’, respectively)</p></li>
</ol>
</div>
<div class="section" id="restricting-access">
<h1>Restricting Access<a class="headerlink" href="#restricting-access" title="Permalink to this headline">¶</a></h1>
<p>You want everyone in your group to be able to read and write to the
directory but no one else. For convenience, you’d like the filesystem
and/or users to automatically ensure these permissions in order to avoid
that last minute deadline hitting and you can’t read the one file that
you need.</p>
<p>First let’s ensure your researchGrp directory is group writeable:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">chgrp</span> <span class="pre">research</span> <span class="pre">/deac/reserachGrp</span></code>
<code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">chmod</span> <span class="pre">g+w</span> <span class="pre">/deac/researchGrp</span></code></p>
<div class="section" id="group-access-only">
<h2>Group access only<a class="headerlink" href="#group-access-only" title="Permalink to this headline">¶</a></h2>
<p>Remove all access to non-group members:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">chmod</span> <span class="pre">o-wrx</span> <span class="pre">/deac/researchGrp</span></code></p>
</div>
<div class="section" id="world-readable">
<h2>World readable<a class="headerlink" href="#world-readable" title="Permalink to this headline">¶</a></h2>
<p>Assuming you have run the “Group access only” command… If you want
non-group members to have read only access, but not edit privileges:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">chmod</span> <span class="pre">o+r</span> <span class="pre">/deac/researchGrp</span></code></p>
<p><a class="reference external" href="Category:New_User_Information">Category:New User
Information</a></p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">DEAC Cluster Wiki</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Adam Carlson, Cody Stevens, Sean Anderson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/information/Managing_Research_Group_Data.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>