
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Version &#8212; DEAC Cluster Wiki  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="version">
<h1>Version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h1>
<p>Versions installed on the cluster:</p>
<ul class="simple">
<li><p>lammps/latest-intel-2012 (LAMMPS code checkout around March 2012)</p></li>
<li><p>lammps/20130813/gnu (LAMMPS code checkout on 2013 Aug 13)</p></li>
</ul>
</div>
<div class="section" id="environment">
<h1>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>MPI : Unless otherwise noted, the MPI implementation used for all
the LAMMPS builds will be OpenMPI 1.6.</p></li>
<li><p>FFTW : The FFTW2 libraries on the cluster will be used for all FFT
support in LAMMPS</p></li>
</ul>
<!-- end list --><ul class="simple">
<li><p>To prepare your environment, load the environment
<a class="reference external" href="Quick_Start_Guide:Environment_Modules">module</a>:</p></li>
</ul>
</blockquote><ul class="simple">
<li></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```
 module load lammps/20130813/gnu
```
</pre></div>
</div>
</div>
<div class="section" id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h1>
<p>:; Authors Website : <a class="reference external" href="http://lammps.sandia.gov/">http://lammps.sandia.gov/</a></p>
<p>:; Users Manual : <a class="reference external" href="http://lammps.sandia.gov/doc/Manual.html">http://lammps.sandia.gov/doc/Manual.html</a></p>
<p>:; Tutorials :
<a class="reference external" href="https://icme.hpc.msstate.edu/mediawiki/index.php/LAMMPS_tutorials">https://icme.hpc.msstate.edu/mediawiki/index.php/LAMMPS_tutorials</a></p>
</div>
<div class="section" id="example-job">
<h1>Example Job<a class="headerlink" href="#example-job" title="Permalink to this headline">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; With this build you can test your build with the input files and SLURM
&gt; job script found on the cluster at:
&gt;
&gt;   -
&gt;     /deac/opt/lammps/20130813/gcc-4.4/test/icme-tutorial-1
&gt;       - Don&#39;t forget to customize the job script for your fairshare
&gt;         group\!
&gt;       - This example is for the GNU build\!
&gt;
&gt; A second test job, which exercises the JPEG library, can be found in
&gt; the following directories. SLURM scripts are not provided but should
&gt; easily be adapted from the ICME Tutorial above.
&gt;
&gt;   -
&gt;     /deac/opt/lammps/20130813/intel-2012/test/jpeg
&gt;       -
&gt;
&gt;         ```
&gt;          bash test-script.sh
&gt;         ```
&gt;     /deac/opt/lammps/20130813/gcc-4.4/test/jpeg
&gt;       -
&gt;
&gt;         ```
&gt;          bash test-script.sh
&gt;         ```
&gt;     &lt;!-- end list --&gt;
&gt;       - Don&#39;t forget to copy these directories to your own directory
&gt;         first\!

# General Information

&gt;   - Main Web Page : &lt;http://lammps.sandia.gov/&gt;
&gt;
&gt; &lt;!-- end list --&gt;
&gt;
&gt;   - Downloading the software
&gt;
&gt;         svn co svn://svn.icms.temple.edu/lammps-ro/trunk mylammps
&gt;
&gt;       - Note: Versioning is by date based timestamp. There is no 1.x
&gt;         or 2.x release number.
&gt;       - Rolling patches and updates are released constantly.
&gt;
&gt; &lt;!-- end list --&gt;
&gt;
&gt;   - Building software
&gt;     &lt;http://lammps.sandia.gov/doc/Section_start.html&gt;
&gt;
&gt; &lt;!-- end list --&gt;
&gt;
&gt;   - Documentation on building LAMMPS packages
&gt;     &lt;http://lammps.sandia.gov/doc/Section_start.html#start_3&gt;
&gt;
&gt; &lt;!-- end list --&gt;
&gt;
&gt;   - Documentation on the actual LAMMPS
&gt;     packages
&gt;     &lt;http://lammps.sandia.gov/doc/Section_packages.html&gt;
&gt;
&gt; &lt;!-- end list --&gt;
&gt;
&gt;   - Tutorials
&gt;     &lt;https://icme.hpc.msstate.edu/mediawiki/index.php/LAMMPS_tutorials&gt;

# GNU gcc/g++ Build Guidelines

  - Build Note : Please be aware that the GNU based build is probably
    the simplest to work through. Please try this build first before
    attempting more complicated compilers and library combinations.

&gt; Ensure you have a clean shell environment:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     $ module list
&gt; &gt;     No Modulefiles Currently Loaded.
&gt;
&gt; Load the OpenMPI and FFTW modules:
&gt;
&gt;   -
&gt;
&gt;         module load openmpi/1.6-gnu; module load libs/fftw-2.1.5/gnu
&gt;
&gt; Note: This build will leverage the BLAS and LAPACK libraries provided
&gt; by Red Hat (likely, unoptimized) found in the RPMs:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     blas-3.2.1-4.el6.x86_64
&gt; &gt;     blas-devel-3.2.1-4.el6.x86_64
&gt; &gt;     lapack-3.2.1-4.el6.x86_64
&gt; &gt;     lapack-devel-3.2.1-4.el6.x86_64
&gt;
&gt; Download the software (20130813 is the date and the directory the
&gt; files are copied
&gt;         to):
&gt;
&gt;   -
&gt;
&gt;         svn co svn://svn.icms.temple.edu/lammps-ro/trunk 20130813; cd 20130813
&gt;
&gt; Create a custom Makefile for the WFU DEAC Cluster and the modules
&gt; loaded above:
&gt;
&gt;   -
&gt;
&gt;         cd src/MAKE; cp Makefile.g++ Makefile.deac_g++
&gt;
&gt; The important things to note when editing the Makefile:
&gt;
&gt; 1.  Since you are building an MPI version, you must use the **mpicxx**
&gt;     &quot;compiler&quot; and not the native **g++** system compiler. This will
&gt;     use g++ under the covers but also include all the MPI include and
&gt;     library paths.
&gt; 2.  Because we use the environment modules to dynamically load your
&gt;     needed include, library, and binary paths, the full paths do not
&gt;     need to be specified in the Makefile.
&gt; 3.  LAMMPS requires modifying the very first line of the Makefile
&gt;     (which is a comment) as part of its Make system.
&gt;
&gt; Below, is the &quot;patch&quot; file listing the changes I made to the custom
&gt; &#39;deac_g++&#39;
&gt; &gt;     build:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     --- ../../src/MAKE/Makefile.g++ 2013-04-02 14:32:30.000000000 -0400
&gt; &gt;     +++ ../../src/MAKE/Makefile.deac_g++    2013-08-13 12:10:21.659748000 -0400
&gt; &gt;     @@ -1,4 +1,4 @@
&gt; &gt;     -# g++ = RedHat Linux box, g++4, MPICH2, FFTW
&gt; &gt;     +# deac_g++ = RedHat Linux box, g++4, OpenMPI, FFTW
&gt; &gt;
&gt; &gt;      SHELL = /bin/sh
&gt; &gt;
&gt; &gt;     @@ -6,12 +6,12 @@
&gt; &gt;      # compiler/linker settings
&gt; &gt;      # specify flags and libraries needed for your compiler
&gt; &gt;
&gt; &gt;     -CC =       g++
&gt; &gt;     +CC =       mpicxx
&gt; &gt;      CCFLAGS =  -g -O # -Wunused
&gt; &gt;      SHFLAGS =  -fPIC
&gt; &gt;      DEPFLAGS = -M
&gt; &gt;
&gt; &gt;     -LINK =     g++
&gt; &gt;     +LINK =     mpicxx
&gt; &gt;      LINKFLAGS =    -g -O
&gt; &gt;      LIB =
&gt; &gt;      SIZE =     size
&gt; &gt;     @@ -37,9 +37,10 @@
&gt; &gt;      # PATH = path for MPI library
&gt; &gt;      # LIB = name of MPI library
&gt; &gt;
&gt; &gt;     -MPI_INC =       -DMPICH_SKIP_MPICXX
&gt; &gt;     +# Left blank because of mpicxx usage
&gt; &gt;     +MPI_INC =
&gt; &gt;      MPI_PATH =
&gt; &gt;     -MPI_LIB =  -lmpich -lmpl -lpthread
&gt; &gt;     +MPI_LIB =
&gt; &gt;
&gt; &gt;      # FFT library, OPTIONAL
&gt; &gt;      # see discussion in doc/Section_start.html#2_2 (step 6)
&gt;
&gt; :\* The full Makefile.deac_g++ can be found on the cluster at:
&gt; /deac/opt/lammps/20130813/gcc-4.4/build/src/MAKE/Makefile.deac_g++
&gt;
&gt; The next step is to test the core software build. If this does not
&gt; build without errors, something is wrong with your environment:
&gt;
&gt;   -
&gt;
&gt;         cd 20130813/src; make deac_g++
&gt;
&gt; Once the environment is right and the core builds without error, you
&gt; can proceed with the standard and/or user packages that you need to
&gt; build. The version on the cluster currently used the following
&gt; instructions:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     cd 20130813/src
&gt; &gt;     make clean-all
&gt; &gt;     make yes-meam
&gt; &gt;     make yes-reax
&gt; &gt;     make yes-manybody
&gt; &gt;     make yes-misc
&gt; &gt;
&gt; &gt;     cd ../lib/meam; make -f Makefile.gfortran
&gt; &gt;     cd ../reax; make -f Makefile.gfortran
&gt; &gt;
&gt; &gt;     cd ../../src; make deac_g++
&gt;
&gt; The binary that is created for your use is &#39;lmp_deac_g++&#39; located in
&gt; the *src* directory from which you ran &#39;make deac_g++&#39;.

# Intel icc/ifort Build Guidelines

&gt; Ensure you have a clean shell environment:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     $ module list
&gt; &gt;     No Modulefiles Currently Loaded.
&gt;
&gt; Load the OpenMPI and FFTW modules: (note, with Intel-2017 compiler,
&gt; refer to:
&gt; [Software:LAMMPS\#Intel-2017_icc.2Fifort_build_guidline](Software:LAMMPS#Intel-2017_icc.2Fifort_build_guidline &quot;wikilink&quot;))
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     module load compilers/intel-2012-lp64
&gt; &gt;     module load libs/fftw-2.1.5/intel-2012
&gt; &gt;     module load openmpi/1.6-intel
&gt;
&gt; At this point, your shell environment is configured to use the
&gt; following software:
&gt;
&gt; 1.  Intel C/C++ Compiler
&gt; 2.  Intel Fortran Compiler
&gt; 3.  FFTW2 2.1.5 libraries build with Intel compilers
&gt; 4.  OpenMPI 1.6 built with Intel compilers
&gt;
&gt; The order of the module loads is very important\! If done incorrectly,
&gt; your environment will use the Intel MPI implementation which has known
&gt; issues with our cluster.
&gt;
&gt; Download the software (20130813 is the date and the directory the
&gt; files are copied
&gt;         to):
&gt;
&gt;   -
&gt;
&gt;         svn co svn://svn.icms.temple.edu/lammps-ro/trunk 20130813; cd 20130813
&gt;
&gt; Create a custom Makefile for the WFU DEAC Cluster and the modules
&gt; loaded above:
&gt;
&gt;   -
&gt;
&gt;         cd src/MAKE; cp Makefile.linux Makefile.deac_icc
&gt;
&gt; The important things to note when editing the Makefile:
&gt;
&gt; 1.  Since you are building an MPI version, you must use the **mpicxx**
&gt;     &quot;compiler&quot; and not the **icc** compiler. This will use **icc**
&gt;     under the covers but also include all the MPI include and library
&gt;     paths.
&gt; 2.  Because we use the environment modules to dynamically load your
&gt;     needed include, library, and binary paths, the full paths do not
&gt;     need to be specified in the Makefile.
&gt; 3.  LAMMPS requires modifying the very first line of the Makefile
&gt;     (which is a comment) as part of its Make system.
&gt; 4.  The **-mkl** compiler and linker options are very important as
&gt;     that builds in the Math Kernel Library support for optimized
&gt;     BLAS/LAPACK routines.
&gt;
&gt; Below, is the &quot;patch&quot; file listing the changes I made to the custom
&gt; &#39;deac_linux&#39; build:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     --- Makefile.linux      2013-04-02 14:32:30.000000000 -0400
&gt; &gt;     +++ Makefile.deac_linux 2013-08-28 11:40:02.684669000 -0400
&gt; &gt;     @@ -1,4 +1,4 @@
&gt; &gt;     -# linux = RedHat Linux box, Intel icc, MPICH2, FFTW
&gt; &gt;     +# deac_icc = RedHat Linux box, Intel icc, OpenMPI 1.6, FFTW2
&gt; &gt;
&gt; &gt;      SHELL = /bin/sh
&gt; &gt;
&gt; &gt;     @@ -6,14 +6,14 @@
&gt; &gt;      # compiler/linker settings
&gt; &gt;      # specify flags and libraries needed for your compiler
&gt; &gt;
&gt; &gt;     -CC =           icc
&gt; &gt;     -CCFLAGS =      -O
&gt; &gt;     +CC =           mpicxx
&gt; &gt;     +CCFLAGS =      -O -mkl
&gt; &gt;      SHFLAGS =      -fPIC
&gt; &gt;      DEPFLAGS =     -M
&gt; &gt;
&gt; &gt;     -LINK =         icc
&gt; &gt;     +LINK =         mpicxx
&gt; &gt;      LINKFLAGS =    -O
&gt; &gt;     -LIB =           -lstdc++
&gt; &gt;     +LIB =           -lstdc++ -mkl
&gt; &gt;      SIZE =         size
&gt; &gt;
&gt; &gt;      ARCHIVE =      ar
&gt; &gt;     @@ -37,9 +37,9 @@
&gt; &gt;      # PATH = path for MPI library
&gt; &gt;      # LIB = name of MPI library
&gt; &gt;
&gt; &gt;     -MPI_INC =       -DMPICH_SKIP_MPICXX
&gt; &gt;     +MPI_INC =
&gt; &gt;      MPI_PATH =
&gt; &gt;     -MPI_LIB =      -lmpich -lmpl -lpthread
&gt; &gt;     +MPI_LIB =
&gt; &gt;
&gt; &gt;      # FFT library, OPTIONAL
&gt; &gt;      # see discussion in doc/Section_start.html#2_2 (step 6)
&gt;
&gt; :\* The full Makefile.deac_linux can be found on the cluster at:
&gt; /deac/opt/lammps/20130813/intel-2012/build/src/MAKE/Makefile.deac_linux
&gt;
&gt; The next step is to test the core software build. If this does not
&gt; build without errors, something is wrong with your environment:
&gt;
&gt;   -
&gt;
&gt;         cd 20130813/src; make deac_linux
&gt;
&gt; Once the environment is right and the core builds without error, you
&gt; can proceed with the standard and/or user packages that you need to
&gt; build. For the Intel compilers, the MEAM and REAX modules required
&gt; some changes to support the Intel compiler linking
&gt; &gt;     phases:
&gt;
&gt;   - src/lib/meam/Makefile.lammps.ifort
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     --- Makefile.lammps.ifort.orig  2013-08-28 12:15:28.006089000 -0400
&gt; &gt;     +++ Makefile.lammps.ifort       2013-08-28 12:15:42.123797000 -0400
&gt; &gt;     @@ -1,5 +1,5 @@
&gt; &gt;      # Settings that the LAMMPS build will import when this package library is used
&gt; &gt;
&gt; &gt;      meam_SYSINC =
&gt; &gt;     -meam_SYSLIB = -lifcore -lsvml -lompstub -limf
&gt; &gt;     -meam_SYSPATH = -L/opt/intel/fce/10.0.023/lib
&gt; &gt;     +meam_SYSLIB = -lifcore -lsvml -limf
&gt; &gt;     +meam_SYSPATH =
&gt;
&gt;   -
&gt;
&gt;       -
&gt;         *(The short, short version: don&#39;t provide a SYSPATH value and
&gt;         remove the -lompstub linker
&gt; &gt;     option)*
&gt;
&gt; &lt;!-- end list --&gt;
&gt;
&gt;   - src/lib/reax/Makefile.lammps.ifort
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     --- Makefile.lammps.ifort.orig  2013-08-28 12:15:28.006089000 -0400
&gt; &gt;     +++ Makefile.lammps.ifort       2013-08-28 12:15:42.123797000 -0400
&gt; &gt;     @@ -1,5 +1,5 @@
&gt; &gt;      # Settings that the LAMMPS build will import when this package library is used
&gt; &gt;
&gt; &gt;      reax_SYSINC =
&gt; &gt;     -reax_SYSLIB = -lifcore -lsvml -lompstub -limf
&gt; &gt;     -reax_SYSPATH = -L/opt/intel/fce/10.0.023/lib
&gt; &gt;     +reax_SYSLIB = -lifcore -lsvml -limf
&gt; &gt;     +reax_SYSPATH =
&gt;
&gt;   -
&gt;
&gt;       -
&gt;         *(The short, short version: don&#39;t provide a SYSPATH value and
&gt;         remove the -lompstub linker option)*
&gt;
&gt; Once the MEAM and REAX modules are patched, the version on the cluster
&gt; currently used the following instructions:
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;     cd 20130813/src
&gt; &gt;     make clean-all
&gt; &gt;     make yes-meam
&gt; &gt;     make yes-reax
&gt; &gt;     make yes-manybody
&gt; &gt;     make yes-misc
&gt; &gt;
&gt; &gt;     cd ../lib/meam; make -f Makefile.ifort
&gt; &gt;     cd ../reax; make -f Makefile.ifort
&gt; &gt;
&gt; &gt;     cd ../../src; make deac_icc
&gt;
&gt; The binary that is created for your use is &#39;lmp_deac_icc&#39; located in
&gt; the *src* directory from which you ran &#39;make deac_icc&#39;.
</pre></div>
</div>
</div>
<div class="section" id="intel-2017-icc-ifort-build-guidline">
<h1>Intel-2017 icc/ifort build guidline<a class="headerlink" href="#intel-2017-icc-ifort-build-guidline" title="Permalink to this headline">¶</a></h1>
<p>With Intel-2017 compiler all above procedures are still valid. However,
since we’ll be using fftw lib compiled by intel-2012 compiler, the
preparation of modules is different.</p>
<p><code class="docutils literal notranslate">&#160; <span class="pre">module</span> <span class="pre">load</span> <span class="pre">libs/fftw-3.3.1/intel-2012</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">module</span> <span class="pre">unload</span> <span class="pre">compilers/intel-2012-lp64</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">module</span> <span class="pre">load</span> <span class="pre">openmpi/2.1.0-intel-2017</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">module</span> <span class="pre">list</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">Currently</span> <span class="pre">Loaded</span> <span class="pre">Modulefiles:</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">1)</span> <span class="pre">libs/fftw-3.3.1/intel-2012</span>&#160;&#160; <span class="pre">3)</span> <span class="pre">libfabric-1.4.1</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">2)</span> <span class="pre">compilers/intel-2017-lp64</span>&#160;&#160;&#160; <span class="pre">4)</span> <span class="pre">openmpi/2.1.0-intel-2017</span></code></p>
<p><a class="reference external" href="Category:Software">Category:Software</a>
<a class="reference external" href="Category:Compiling">Category:Compiling</a></p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">DEAC Cluster Wiki</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Adam Carlson, Cody Stevens, Sean Anderson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/software/pending/LAMMPS.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>