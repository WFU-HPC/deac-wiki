
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Example &#8212; DEAC Cluster Wiki  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p><strong>R</strong> is open source statistical analysis software.[1]</p>
<p><strong>R</strong> has an IDE called <a class="reference external" href="Software:RStudio">Software:RStudio</a>
that you can use at any head-node</p>
<p>Multi-process <strong>R</strong> with MPI can be found <a class="reference external" href="Software:R_-_Multiprocess_with_MPI">Software:R - Multiprocess
with MPI</a></p>
<div class="section" id="example">
<h1>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h1>
<p>To run on the cluster, you need to run as a batch command. And you will
also need to be aware of file
paths.</p>
<p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">###</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">###</span> <span class="pre">mycomputation.R</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">###</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#</span> <span class="pre">You</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">datafile</span> <span class="pre">stuff.dat</span> <span class="pre">to</span> <span class="pre">load</span> <span class="pre">in</span> <span class="pre">the</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">directory</span> <span class="pre">where</span> <span class="pre">you</span> <span class="pre">will</span> <span class="pre">issue</span> <span class="pre">the</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">sbatch</span> <span class="pre">command</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">f</span> <span class="pre">&lt;-</span> <span class="pre">file.path(Sys.getenv(&quot;SLURM_SUBMIT_DIR&quot;),</span> <span class="pre">&quot;stuff.dat&quot;)</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">load(f)</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; </code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Do</span> <span class="pre">some</span> <span class="pre">processing...</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">...</span> <span class="pre">and</span> <span class="pre">write</span> <span class="pre">the</span> <span class="pre">output</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">file</span> <span class="pre">/scratch/${SLURM_JOBID}/my_output.dat</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">output_file</span> <span class="pre">&lt;-</span> <span class="pre">file.path(&quot;/scratch&quot;,</span> <span class="pre">Sys.getenv(&quot;SLURM_JOBID&quot;),</span> <span class="pre">&quot;my_output.dat&quot;)</span></code>
<code class="docutils literal notranslate">&#160;&#160; </code></p>
<p>and the corresponding SLURM job script, named “my_computation.slurm”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH --partition=small
#SBATCH --job-name=&quot;my_computation&quot;
#SBATCH --mail-type=FAIL,END
#SBATCH --output=&quot;my_computation-%j.o&quot;
#SBATCH --error=&quot;my_computation-%j.e&quot;
#SBATCH --mail-user=MY_EMAIL_ADDRESS@wfu.edu
#SBATCH --account=&quot;myresearchGrp&quot;
#SBATCH --mem=48gb
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=1
#SBATCH --time=20:00:00

module load R/3.5.0

cd ${SLURM_SUBMIT_DIR}
scratchdir=&quot;/scratch/${SLURM_JOBID}&quot;
R --vanilla --no-timing CMD BATCH my_computation.R my_computation.out
mv ${scratchdir}/my_output.dat .
</pre></div>
</div>
<p>To run, do: <strong>sbatch my_computation.slurm</strong></p>
</div>
<div class="section" id="installing-packages">
<h1>Installing Packages<a class="headerlink" href="#installing-packages" title="Permalink to this headline">¶</a></h1>
<p>For R packages to be installed globally on the DEAC cluster please email
deac-help&#64;wfu.edu with name of the desired R package.</p>
<p>If you would like to install an R package locally to your research group
path, you can do so with the following steps:</p>
<ul class="simple">
<li><p>Create a directory where the R packages will be installed
(Preferably in a shared folder your entire research group can use):</p></li>
</ul>
<p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">/deac/generalGrp/</span></code><strong><code class="docutils literal notranslate"><span class="pre">yourResearchGrp</span></code></strong><code class="docutils literal notranslate"><span class="pre">/R-packages/</span></code></p>
<ul class="simple">
<li><p>Load the environment module file for your desired version of R and
start and R session:</p></li>
</ul>
<p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">module</span> <span class="pre">load</span> <span class="pre">rhel7/R/3.5.0</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">R</span></code></p>
<ul class="simple">
<li><p>After starting an R session add the directory where you want to
install the R package to your library
path:</p></li>
</ul>
<p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">R</span> <span class="pre">version</span> <span class="pre">3.5.0</span> <span class="pre">(2018-04-23)</span> <span class="pre">--</span> <span class="pre">&quot;Joy</span> <span class="pre">in</span> <span class="pre">Playing&quot;</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Copyright</span> <span class="pre">(C)</span> <span class="pre">2018</span> <span class="pre">The</span> <span class="pre">R</span> <span class="pre">Foundation</span> <span class="pre">for</span> <span class="pre">Statistical</span> <span class="pre">Computing</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Platform:</span> <span class="pre">x86_64-pc-linux-gnu</span> <span class="pre">(64-bit)</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; </code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">R</span> <span class="pre">is</span> <span class="pre">free</span> <span class="pre">software</span> <span class="pre">and</span> <span class="pre">comes</span> <span class="pre">with</span> <span class="pre">ABSOLUTELY</span> <span class="pre">NO</span> <span class="pre">WARRANTY.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">You</span> <span class="pre">are</span> <span class="pre">welcome</span> <span class="pre">to</span> <span class="pre">redistribute</span> <span class="pre">it</span> <span class="pre">under</span> <span class="pre">certain</span> <span class="pre">conditions.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Type</span> <span class="pre">'license()'</span> <span class="pre">or</span> <span class="pre">'licence()'</span> <span class="pre">for</span> <span class="pre">distribution</span> <span class="pre">details.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; </code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Natural</span> <span class="pre">language</span> <span class="pre">support</span> <span class="pre">but</span> <span class="pre">running</span> <span class="pre">in</span> <span class="pre">an</span> <span class="pre">English</span> <span class="pre">locale</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; </code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">R</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">collaborative</span> <span class="pre">project</span> <span class="pre">with</span> <span class="pre">many</span> <span class="pre">contributors.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Type</span> <span class="pre">'contributors()'</span> <span class="pre">for</span> <span class="pre">more</span> <span class="pre">information</span> <span class="pre">and</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">'citation()'</span> <span class="pre">on</span> <span class="pre">how</span> <span class="pre">to</span> <span class="pre">cite</span> <span class="pre">R</span> <span class="pre">or</span> <span class="pre">R</span> <span class="pre">packages</span> <span class="pre">in</span> <span class="pre">publications.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; </code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Type</span> <span class="pre">'demo()'</span> <span class="pre">for</span> <span class="pre">some</span> <span class="pre">demos,</span> <span class="pre">'help()'</span> <span class="pre">for</span> <span class="pre">on-line</span> <span class="pre">help,</span> <span class="pre">or</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">'help.start()'</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">HTML</span> <span class="pre">browser</span> <span class="pre">interface</span> <span class="pre">to</span> <span class="pre">help.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">Type</span> <span class="pre">'q()'</span> <span class="pre">to</span> <span class="pre">quit</span> <span class="pre">R.</span></code>
<code class="docutils literal notranslate">&#160;&#160;&#160; </code>
<code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">&gt;</span> <span class="pre">.libPaths(&quot;/deac/generalGrp/</span></code><strong><code class="docutils literal notranslate"><span class="pre">yourResearchGrp</span></code></strong><code class="docutils literal notranslate"><span class="pre">/R-packages/&quot;)</span></code></p>
<ul class="simple">
<li><p>Now any package you install in this R session will be installed to
this libPath directory. You are then free to install any package
using the following command:</p></li>
</ul>
<p><code class="docutils literal notranslate">&#160;&#160; <span class="pre">&gt;</span> <span class="pre">install.packages(&quot;</span></code><em><code class="docutils literal notranslate"><span class="pre">package_name</span></code></em><code class="docutils literal notranslate"><span class="pre">&quot;)</span></code></p>
<p>When submitting jobs to the DEAC cluster you will need to add the
following line to your R script before loading any packages to ensure
your R script is able to find the packages during execution:</p>
<p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">.libPaths(&quot;/deac/generalGrp/</span></code><strong><code class="docutils literal notranslate"><span class="pre">yourResearchGrp</span></code></strong><code class="docutils literal notranslate"><span class="pre">/R-packages/&quot;)</span></code></p>
<p>If you get an error like “X connection to localhost:14.0 broken”, that
means that you are not running an X11 display. R’s package installation
defaults to using a Graphical User Interface (GUI) to select a CRAN
mirror.</p>
<p>To work around this, you can select a CRAN mirror before installing a
package. Doing the following will bring up a terminal-based CRAN mirror
selector:</p>
<p><code class="docutils literal notranslate">&#160;&#160;&#160; <span class="pre">[username&#64;headnode]&gt;</span> <span class="pre">chooseCRANmirror(graphics=F)</span></code></p>
<p>and then run the install.packages() command as usual.</p>
<p>If you receive any other errors when trying to install packages this
way, please contact deac-help&#64;wfu.edu for assistance.</p>
</div>
<div class="section" id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h1>
<references/></div>
<div class="section" id="see-also">
<h1>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="http://www.revolutionanalytics.com/products/revolution-r.php">Revolution
R</a> - a
faster (optimized) version of R (100% compatible) with support for
multi-core; supports RedHat Enterprise Linux 5; source code
available</p></li>
</ul>
<p><a class="reference external" href="Category:Software">Category:Software</a>
<a class="reference external" href="Category:Languages">Category:Languages</a></p>
<ol class="simple">
<li><p><a class="reference external" href="http://www.r-project.org/">The R Project for Statistical Computing</a></p>
<ul class="simple">
<li><p>official web page</p></li>
</ul>
</li>
</ol>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">DEAC Cluster Wiki</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Adam Carlson, Cody Stevens, Sean Anderson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/software/pending/R.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>