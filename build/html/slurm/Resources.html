
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Resource Requests &#8212; DEAC Cluster Wiki  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="resource-requests">
<h1>Resource Requests<a class="headerlink" href="#resource-requests" title="Permalink to this headline">¶</a></h1>
<div class="section" id="standard-resource-request">
<h2>Standard Resource Request<a class="headerlink" href="#standard-resource-request" title="Permalink to this headline">¶</a></h2>
<p>Resources for a job are requested with 4 primary directives. In a SLURM
script:</p>
<p><code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--nodes=1</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--tasks-per-node=8</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--cpus-per-task=1</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--mem=16gb</span></code></p>
<p>Which requests 1 node, 8 CPUs, and 16GB of RAM.</p>
</div>
<div class="section" id="generic-resource-request-gpus">
<h2>Generic Resource Request - GPUs<a class="headerlink" href="#generic-resource-request-gpus" title="Permalink to this headline">¶</a></h2>
<p>Generic resource scheduling (GRES) is used for requesting GPU resources
with one primary directive. In a SLURM script:</p>
<p><code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--partition=&quot;gpu&quot;</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--nodes=1</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">#SBATCH</span> <span class="pre">--gres=gpu:1</span></code></p>
<p>Which requests 1 GPU to be used from 1 node belonging to the GPU
partition. Obviously, GPU resources are requested differently that
standard resources. Official documentation is available from SchedMD on
GRES configuration[1] and SBATCH GRES specification[2].</p>
</div>
</div>
<div class="section" id="partitions">
<h1>Partitions<a class="headerlink" href="#partitions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="debug">
<h2><em>debug</em><a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><ul>
<li><p>Purpose: Default partition, for testing only - check if your job
starts.</p></li>
<li><p>Limits: &lt;06:00:00</p></li>
<li><p>Priority: 10</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="small">
<h2><em>small</em><a class="headerlink" href="#small" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><ul>
<li><p>Purpose: Small consumption, short serial or parallel jobs</p></li>
<li><p>Limits: &lt;24:00:00, 1 node</p></li>
<li><p>Priority: 40</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="medium">
<h2><em>medium</em><a class="headerlink" href="#medium" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><ul>
<li><p>Purpose: Mid-range jobs</p></li>
<li><p>Limits: &lt;7-00:00:00, &lt;8 nodes</p></li>
<li><p>Priority: 30</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="large">
<h2><em>large</em><a class="headerlink" href="#large" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><ul>
<li><p>Purpose: Large consumption, long running jobs</p></li>
<li><p>Limits: &lt;365-00:00:00, no node limit</p></li>
<li><p>Priority: 20</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="gpu">
<h2><em>gpu</em><a class="headerlink" href="#gpu" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><ul>
<li><p>Purpose: GPU required jobs</p></li>
<li><p>Limits: &lt;365-00:00:00, no node limit</p></li>
<li><p>Priority: 50</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="list-of-resource-specifiers">
<h1>List of Resource Specifiers<a class="headerlink" href="#list-of-resource-specifiers" title="Permalink to this headline">¶</a></h1>
<p>Below is a list of all resource specifications and their definitions.
Please see the official documentation for a requesting resources and
detailed definitions with batch submission.[3] There are many SLURM
users, so a Google search is bound to find great documentation as well,
like this page at the Leibniz Supercomputing Centre[4].</p>
<ul class="simple">
<li><p><strong>tasks-per-node</strong>=</p>
<ul>
<li><p><em>integer</em> – processes per node (<em>not</em> processors)</p></li>
</ul>
</li>
<li><p><strong>nodes</strong>=</p>
<ul>
<li><p><em>integer</em> – number of nodes OR</p></li>
<li><p><em>string</em> – name of specific node</p></li>
</ul>
</li>
<li><p><strong>mem</strong></p>
<ul>
<li><p><em>string</em> – memory allocation per node, 90gb, 16gb, 512mb, etc</p></li>
</ul>
</li>
<li><p><strong>time</strong></p>
<ul>
<li><p><em>string</em> – time specification, ((d-)hh:mm:ss; Maximum amount of
real time during which the job can be in the running state.</p></li>
</ul>
</li>
<li><p><strong>gres</strong>= (Generic Resources Scheduling)</p>
<ul>
<li><ul>
<li><p>‘’string[[:string]:number – <strong>GPU</strong> allocation example,
gpu:4</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="cpusets">
<h2>cpusets<a class="headerlink" href="#cpusets" title="Permalink to this headline">¶</a></h2>
<p>In brief:</p>
<blockquote>
<div><p>In the Linux kernel, the cpuset facility provides a mechanism for
creating logical entities called “cpusets” that encompass definitions
of CPUs and NUMA Memory Nodes (if NUMA is available). Cpusets
constrain the CPU and Memory placement of a task to only the resources
defined within that cpuset. These cpusets can then be arranged into a
nested hierarchy visible in the “cpuset” virtual filesystem. Sets of
tasks can be assigned to these cpusets to constrain the resources that
they use. The tasks can be moved from one cpuset to another to utilize
other resources defined in those other cpusets.[5]</p>
</div></blockquote>
</div>
<div class="section" id="node-features">
<h2>Node Features<a class="headerlink" href="#node-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>In SLURM, nodes may be tagged with a number of strings. These
strings are called <em>features</em>. You can query any particular node to
see its
properties:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">scontrol</span> <span class="pre">show</span> <span class="pre">node</span> <span class="pre">bc03bl01</span></code>
<code class="docutils literal notranslate"><span class="pre">NodeName=bc03bl01</span> <span class="pre">Arch=x86_64</span> <span class="pre">CoresPerSocket=4</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">CPUAlloc=0</span> <span class="pre">CPUErr=0</span> <span class="pre">CPUTot=8</span> <span class="pre">CPULoad=0.47</span> <span class="pre">Features=</span></code><strong><code class="docutils literal notranslate"><span class="pre">ethernet,clan03,scr9gb</span></code></strong>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">Gres=(null)</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">NodeAddr=152.17.40.65</span> <span class="pre">NodeHostName=bc03bl01</span> <span class="pre">Version=14.11</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">OS=Linux</span> <span class="pre">RealMemory=96732</span> <span class="pre">AllocMem=0</span> <span class="pre">Sockets=2</span> <span class="pre">Boards=1</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">State=IDLE</span> <span class="pre">ThreadsPerCore=1</span> <span class="pre">TmpDisk=0</span> <span class="pre">Weight=1</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">BootTime=2015-07-29T15:21:51</span> <span class="pre">SlurmdStartTime=2015-09-11T13:58:01</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">CurrentWatts=0</span> <span class="pre">LowestJoules=0</span> <span class="pre">ConsumedJoules=0</span></code>
<code class="docutils literal notranslate">&#160;&#160; <span class="pre">ExtSensorsJoules=n/s</span> <span class="pre">ExtSensorsWatts=0</span> <span class="pre">ExtSensorsTemp=n/s</span></code></p>
<ul class="simple">
<li><p>A node with GPU resources available has the following listed in it’s
properties:</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">scontrol</span> <span class="pre">show</span> <span class="pre">node</span> <span class="pre">gpu05</span> </code>
<code class="docutils literal notranslate"><span class="pre">NodeName=gpu05</span> <span class="pre">Arch=x86_64</span> <span class="pre">CoresPerSocket=6</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">CPUAlloc=0</span> <span class="pre">CPUErr=0</span> <span class="pre">CPUTot=6</span> <span class="pre">CPULoad=0.10</span> <span class="pre">Features=</span></code><strong><code class="docutils literal notranslate"><span class="pre">gpu</span></code></strong>
<code class="docutils literal notranslate">&#160; <span class="pre">Gres=</span></code><strong><code class="docutils literal notranslate"><span class="pre">gpu:4</span></code></strong>
<code class="docutils literal notranslate">&#160; <span class="pre">NodeAddr=152.17.36.141</span> <span class="pre">NodeHostName=gpu05</span> <span class="pre">Version=14.11</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">OS=Linux</span> <span class="pre">RealMemory=23986</span> <span class="pre">AllocMem=0</span> <span class="pre">Sockets=1</span> <span class="pre">Boards=1</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">State=IDLE</span> <span class="pre">ThreadsPerCore=1</span> <span class="pre">TmpDisk=0</span> <span class="pre">Weight=1</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">BootTime=2015-12-16T12:55:25</span> <span class="pre">SlurmdStartTime=2015-12-16T12:55:54</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">CurrentWatts=0</span> <span class="pre">LowestJoules=0</span> <span class="pre">ConsumedJoules=0</span></code>
<code class="docutils literal notranslate">&#160; <span class="pre">ExtSensorsJoules=n/s</span> <span class="pre">ExtSensorsWatts=0</span> <span class="pre">ExtSensorsTemp=n/s</span></code></p>
</div>
</div>
<div class="section" id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h1>
<references/><p><a class="reference external" href="Category:SLURM">Category:SLURM</a>
<a class="reference external" href="Category:GPU">Category:GPU</a></p>
<ol class="simple">
<li><p><a class="reference external" href="http://slurm.schedmd.com/gres.html">GRES Configuration</a></p></li>
<li><p><a class="reference external" href="http://slurm.schedmd.com/sbatch.html#OPT_gres">SBATCH GRES
Specification</a></p></li>
<li><p><a class="reference external" href="http://slurm.schedmd.com/sbatch.html">Slurm Sbatch Documentation - Job
Submission</a></p></li>
<li><p><a class="reference external" href="https://www.lrz.de/services/compute/linux-cluster/batch_parallel/specifications/">Leibniz Supercomputing Centre - Resource
Specification</a></p></li>
<li><p><a class="reference external" href="https://www.suse.com/documentation/slerte_11/slerte_tutorial/data/slerte_tutorial.html">cpuset (cset) tutorial - Novell,
Inc.</a></p></li>
</ol>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">DEAC Cluster Wiki</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Adam Carlson, Cody Stevens, Sean Anderson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/slurm/Resources.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>